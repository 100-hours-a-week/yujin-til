## 📆 2025-11-13

### 🔔 스크럼

- AWS(모니터링, 배포) 강의 복습 및 정리
- 9주차 과제 진행
  - ELB 생성
  - WS 띄어보기

### 🚀 Today I Learned

#### CloudTrail

- AWS **계정에서 발생**하는 모든 API호출과 콘솔 활동을 자동으로 기록하고 추적하는 서비스
- 로그를 S3버킷에 저장하고, CloudWatch Log와 연동해서도 사용가능
- 사용이유 : 보통 보안감사 또는 장애서비스 해결을 위해 사용함

#### CloudWatch

- AWS 리소스와 애플리케이션에서 발생하는 로그,지표, 이벤트를 수집/모니터링하는 통합 관제 서비스
- EC2 같은 리소스의 CPU 사용률, 메모리, 디스크, 네트워크 지표를 실시간으로 확인 가능
- - 인스턴스 임계값을 초과하면 알림 발송하거나 자동으로 조치를 취하는 기능도 제공함.
- 코드쪽에서 로그의 레벨이 나눠져있지 않거나, 로그에 너무 많은 정보가 들어가면 CloudWatch에서 보기 어려움
- 주요 사용 방식
  - 로그 수집 중앙화
    - 애플리케이션(비즈니스 로직을 제공하는 모든 것) 로그
    - EC2 ← 컴퓨터 ← 서버 프로그램 ← 서버에서도 로그
    - DB 로그
    - 람다 로그
    - ⇒ 로그 수집하면 뭐가 좋은가? Athena 같은 툴에서 모아볼수있음
  - 모니터링
    - 인스턴스 ← CPU, RAM 지표
    - HTTP 응답, 요청
      - 시간대별로 200 응답의 비율
      - 500 응답의 비율
  - 알람
    - 500응답이 5분 동안 전체 응답 중 5%가 넘어간다 ← 슬랙, 이메일로 알람보냄
  - 로그 검색, 시각화

#### Athena

- S3에 저장된 데이터를 표준 SQL로 직접 조회/분석할 있는 서버리스 쿼리 서비스
- 사용자는 단순히 SQL 쿼리만 작성하면되고, 아테네가 자동으로 S3 데이터를 불러와 처리함

#### CodeDeploy

- AWS에서 제공하는 자동화된 애플리케이션 배포 서비스
- CI/CD에서 CD영역을 담당하는 부분을 AWS가 제공하는 서비스이름이 CodeDeploy
- 사용자는 애플리케이션을 EC2 인스턴스, Lambda 함수, 또는 온프레미스 서버에 자동으로 배포할 수 있음
- 자세한 내용은 CI/CD 배울때 다룰 예정

### 🔥 오늘의 도전 과제와 해결 방법

- ALB에서 프론트 서버로 요청이 전달되지 않아 502 Bad Gateway : 서버가 죽은 게 아니라 ALB가 EC2와 통신을 못한 것
  - ALB는 80 포트로 요청을 받지만, EC2 Node 서버는 3000 포트에서 실행 중이다. 근데 EC2 보안그룹에서 3000 포트가 열려 있지 않아서 추가해줬고, Express 서버를 0.0.0.0으로 바인딩해서 외부에서 접근 가능하도록 수정했다.

### 🗨️ 오늘의 회고

- 네트워크 구성의 핵심은 인스턴스의 용량보다는 사용자가 몰리는 피크시간대의 트래픽을 어떻게 견딜것이냐..이걸 고민해야한다.
- 네트워크 구조를 끝없이 고민하다가는 실제 인스턴스들을 못띄워볼거같아서, 시작해봤는데 처음이라 그런지 쉽지않다. 그래도 하나하나 차분히 해결해 나가는중이다!
