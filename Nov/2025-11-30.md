## 📆 2025-11-30

### 🔔 스크럼

- 개인 프로젝트 이미지 구현
  - 회원 프로필 이미지 업로드를 S3 Presigned URL 방식으로 변경
  - 닉네임 수정 API / 프로필 이미지 수정 API 분리
  - 기본 프로필 처리 및 프론트 UI/UX 정리

### 🚀 Today I Learned

#### Presigned URL 방식

- S3는 기본적으로 private 저장소이기 때문에 클라이언트가 S3로 직접 파일을 업로드하거나 다운로드할 수 없다.
- 하지만 일시적으로 S3에 접근할 수 있는 인증된 URL을 생성하는 기능을 제공하는데,
  이게 바로 Presigned URL이다.
- 즉, “특정 파일 경로에 한해서 일정 시간 동안만 유효한 1회성 업로드 URL” 을 만들어
  클라이언트가 직접 S3로 업로드할 수 있게 해주는 방식이다.
- 장점
  - 서버 부하 거의 0 : 파일 업로드가 서버를 거치지 않아서 대규모 서비스에서 이미지 업로드가 많은 경우 월등히 유리
  - 이미지 가공(압축/리사이징)을 프론트에서 직접 수행 가능 : Presigned URL은 “파일을 어떻게 가공해도 S3에 넣기만 하면 되는 구조”라서 프론트에서 canvas, web worker 등을 통해 용량 줄이기를 자유롭게 할 수 있음
  - 확장성 좋음 : CDN(CloudFront) 붙이거나, 이미지 리사이즈 파이프라인 추가할 때도
    서버 로직에 영향 없이 확장 가능.
  - 업로드/다운로드 모듈을 어디서든 재사용 가능 : 프로필 이미지, 게시물 이미지, 첨부파일 등
    어떤 업로드 기능이든 동일한 로직 구성 가능.

### 🔥 오늘의 도전 과제와 해결 방법

- 회원 기본 이미지 처리 로직 정리

  - 프로필 change할때 → presigned URL 발급 → S3로 직접 업로드 → 서버에 이미지 메타데이터 PATCH
  - 닉네임 수정은 수정하기 버튼 눌렀을때 따로 실행

- 업로드용 함수 공통 모듈화
  - fileUploader.js라는 공통 모듈을 작성해 프로필 / 게시물 이미지 업로드 로직을 하나로 통합

### 🗨️ 오늘의 회고

- Presigned URL 방식은 처음에는 복잡하고 낯설었지만, 알고 보니 이미지 업로드 관련 문제들을 가장 깔끔하게 해결하는 방식이었다. 또한, API 분리, 프론트/백엔드 책임 분리, S3 key 관리 같은 부분들을 이해하면서, “왜 이렇게 설계해야 하는지”를 정확히 납득할 수 있었고 서비스가 확장될수록 이런 구조가 얼마나 중요한지 실감했다.
- 나중에 게시물 이미지 여러 개를 동시에 업로드하거나, CloudFront를 붙이는 상황이 와도
  지금의 설계가 그대로 확장 가능하다는 점에서 구현하길 잘했다는 생각이 들었다.
