## 📆 2025-09-24

### 🔔 스크럼

- NoSQL, DB의 확장 강의 복습 및 정리
- 이번 주차 과제 수행

### 🚀 Today I Learned

#### NoSQL

- Not only SQL로 SQL만을 사용하지 않는 여러 유형의 DB
- Why? 데이터의 다양성, 대규모 처리 등 유연한 설계 요구에 대처하기 위함
- 유연한 데이터 구조, 동시 처리성↑, 확장성↑ (RDB의 단점 극복)
- 종류

  1. Key-Value Store

     ![image.png](https://github.com/user-attachments/assets/60cede1a-ea1b-4d8c-8e31-0480d99b00a9)

     - 단순 key-value(비정형 데이터일수도)쌍으로 데이터를 저장
     - 장점 : 읽기/쓰기 속도 매우 빠름(인메모리 구조, 해시Table기반), 구조 단순, 수평확장용이

       - 인메모리 DB? : 데이터를 RAM에 저장/관리하는 구조를 말함
         - RAM 특징(용량 많지않고, 휘발성)이 key-value구조에 잘맞아서 key-value는 인메모리 방식을 사용함
         - RDMS는 HDD/SSD에 저장됨. 필요할때만 일부 메모리 캐싱하여 사용

     - 단점 : 구조 단순 → 복잡한 쿼리, 검색 어려움, value의 내부구조 DB가 이해못함
     - 주 사용처 : 세션,캐시,토큰, 사용자 설정 같은곳/쓰고읽기가 많은곳/속도민감한곳
     - ex) Redis(휘발성이지만 영속성 옵션을 켜면 중요데이터도 사용 가능)
       - 페이징이 엄청날때 처음에 모든 혹은 범위 내 데이터를 전부 가져온다음에 1페이지에 보여주는거 빼고는 나머지는 redis에 저장시켜놓고, 꺼내서 가져옴. redis에 없을때만 DB조회 → 새로운 데이터 들어올때 문제가 생겨서 새로운 쓰기가 생기면 Redis에도 같이 갱신 등 전략들이 필요함
     - Aerospike : RAM(자주쓰는 메타데이터 인덱스) + SSD(실제 데이터) 저장방식(인메모리만 하기에는 데이터 양도 많아지고 속도도 빨라야해서 나온 고성능 key-value저장 방식)
       - HDD는 느리고, RAM은 비싸기에 그 사이의 SSD를 타켓으로 나온 방식
       - 강한 일관성!
       - ex) 광고 실시간 입찰, 추천시스템, 사기방지, 고용량 세션 스토리지 ⇒ 실시간성 + data영속성 + 큰용량 필요할때

  2. Document Oriented Store

     ![image.png](https://github.com/user-attachments/assets/914cdebf-bec4-4fe7-92f0-35d2060cb5c9)

     - Json, XML같은 문서 단위로 data저장. 각 문서는 고유한 ID를 가짐
     - 장점 : 구조 자유로움→스키마 변경, 쿼리검색 유연
     - 단점 : join어려움 → 복잡한 관계
     - ex) mongoDB, 블로그, 컨텐츠 관리

  3. Column-Oriented Store

     ![image.png](https://github.com/user-attachments/assets/69364dfb-bed2-4a69-926d-e8b6b806ade5)

     - 컬럼 단위 data저장, 항목끼리 묶어서 보관
     - Row-oriented : RDMS처럼 열단위로 한묶음
     - 장점 : 대용량 data, 빅데이터 처리 적합, 읽기성능↑
     - 단점 : 설계 복잡, 복잡한 쿼리 어려움, 느림(모든 컬럼을 모아 row생성해야하기때문)
     - ex) Cassandra

  4. Graph Store

     ![image.png](https://github.com/user-attachments/assets/6aa959ed-4cc5-4d8c-a759-b9214191bb9d)

     - 데이터를 노드, 엣지 구조로 표현하여, 객체 간의 관계중심으로 데이터 저장
     - 장점 : 관계기반 조회 최적화, SNS/추천시스템에서 효율적
     - 단점 : 트랜잭션/대용량 처리 복잡, 수평확장 어려움
     - ex) Neo4j, 소셜그래프

#### DB의 확장

- DB를 물리적 또는 논리적으로 분산시키는 기술
- RDMS, NoSQL 모두 가능한 확장방법임
- 확장의 주요 기법

  1. 파티셔닝

     ![image.png](https://github.com/user-attachments/assets/cbc8a2e3-f754-4d2e-862a-1a5a3820030b)

     1. 수직 파티셔닝 : 하나의 table을 컬럼으로 쪼개자
        - 얼마나?자주? 를 기준으로 분리함
     2. 수평 파티셔닝(샤딩) : 하나의 table을 행으로 쪼개자
        - 범위(날짜별?), 리스트(지역별?)에 따라 같은 table을 쪼개는것

  2. 복제

     ![image.png](https://github.com/user-attachments/assets/6dc0a83d-ba0a-42f3-8308-cbb9f57eab22)

     - 똑같은 데이터를 복제하자!
     - 실무에서 많이 사용함
     - Master : 데이터를 쓰는 작업
     - Slave : 데이터를 읽는 작업 & 실시간으로 복제받음
     - 읽기/쓰기 비율이 일정할때 사용한느것이 효과적임

  3. 샤딩 = 수평 파티셔닝
     - 보편적으로 NoSQL 데이터베이스에서 많이 사용, 최근에는 SQL 데이터베이스에서도 샤딩 기능을 제공함
     - ex ) CockroachDB는 분산형 RDBMS로서 샤딩을 지원하며, MySQL, MSSQL, PostgreSQL 같은 전통적인 SQL 데이터베이스에서도 샤딩을 구현

### 🗨️ 오늘의 회고

- 처음에는 DB설계의 정답을 찾으려고 했다. 하지만 이번 과제를 통해 느낀 점은, DB 설계에는 정답이 아니라 근거 있는 선택을 한다면 그게 내 프로젝트에 맞는 정답이라는 것을 다시한번 알았다.
