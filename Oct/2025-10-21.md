## 📆 2025-10-21

### 🔔 스크럼

- Spring 테스트 코드 강의 복습 및 정리
- 6주차 과제 중 타임리프 완료
  - terms, privacy html 생성
  - 해당 페이지 불러오기
  - 프론트 푸터에 연결하기

### 🚀 Today I Learned

#### Test Code

- 소프트웨어 개발 후, 기능과 동작을 테스트하는 코드
- Why? 개발자가 하나하나 안적어도됨.
  - 콘솔 입력 없이 자동 실행가능
  - 검증 해야하는 일부분 빠르게 검증
  - 리팩토링 안정적
  - 문제점도 빠르게 찾을 수 있음
- 종류
  - **단위 테스트**
  - 통합 테스트

#### 단위 테스트

- 하나의 모듈을 기준으로 독립적으로 진행되는 가장 작은 “**가치 있는 단위**” 테스트
- 애플리케이션에서 작동하는 하나의 기능을 테스트(service, repo..등)
  - 보통은 service만 테스트함 → 로직이 있는 코드를 테스트하기 때문
- **개별적인 코드 단위가 의도대로 잘 동작하는지 확인하는 테스트**
  - 성공 시나리오 보다 실패 시나리오가 더 중요
- **독립적인 테스트**를 해야하기에 의존성을 제거해야함
- 방법
  - 외부 의존성 제거하기(Mock)
  - 필요한 의존성 가져오기
  - 테스트 코드 작성하기
- 장점
  - 빠른 테스트 속도
  - 리팩토링이 강함 - 내부코드가 바뀌더라고 단위기능 검증
- 단점
  - 외부 의존성이 강한 로직은 작성하기 어려움
  - 비즈니스 로직이 제대로 동작하는지 검증X

#### 통합테스트

- 여러 개의 모듈을 함께 묶어 테스트 하는것
- @SpringBootTest
- 장점
  - 스프링 부트 컨테이너 띄워 테스트
  - 운영 환경과 가장 유사한 테스트기능
  - 전체적인 플로우 쉽게 테스트 가능
- 단점
  - 애플리케이션 설정, 빈 로드 → 시간 오래걸림

#### 테스트 원칙

- 효율적이고, 좋은 단위 테스트를 하기 위한 5가지 요소
- FIRST
  - Fast : 빠른 실행 → 따라서 테스트 단위 작아야함. 서버/DB 사용X
  - Independent : 독립적 → 단위 테스트는 그 자체만으로 실행되어여함, 다른 테스트에 의존하거나 영향주면 X, 순서 영향 X

#### 작성법

- Given - When - Then
  - 주어진 값이, 이런 상황에서는, 이 값이 예상된다
- JUnit + assertj + Mock 라이브러리 사용
- @Test 어노로 테스트 선언
- AssertJ 라이브러리로 값 비교 - assertThat(result).isEqualTo()
- @DataJpaTest - quertDsl/ jpql을 사용한 레포지토리는 테스트가 필요하니까 이거 사용

#### Mock 객체

- 의존 객체로부터 독립적으로 테스트를 수행
  - 단위테스트를 위해서는 외부 의존성 줄여야하는데 필요할때 사용하는게 목 객체(DI안하고 가짜 객체로 넣어놓는 느낌)
- DB사용하지도 않고도 테스트 가능
- Stub : 목 객체로 예상 동작 정의하기

#### Test 비용

- 가성비 있게 작성해야함 → 통합 테스트가 아닌 단위 테스트 먼저 하라는 이유
- 가성비 있다는것 = 복잡성과 도메인 연관성이 높은것
- 도메인 모델/중요 알고리즘 → 테스트 반드시 진행
- 지나치게 복잡한 코드 : 로직 복잡, 의존성 많음 → 비용이 많지만 테스트를 안하기에는 위험함
  - 리팩토링 필요
    - 관심사 분리, 단일 책임 미준수 코드임 → 도메인, 컨트롤러로 분리

#### TDD

- Test Driven Development, 테스트 주도 개발
- 작은 단위 테스트 만들고, 이를 통과한 코드 만들자는 개발 방법론
- Red : 실패하는 테스트 코드를 먼저 작성
- Green : 테스트 코드를 성공하기 위한 실제 코드 작성
- Blue : 중복 코드 제거, 일반화 등 리팩토링 수행

### 🔥 오늘의 도전 과제와 해결 방법

- 프론트 서버가 시작과 동시에 이유없이 죽음 : 서버를 계속 켜둔상태에서 오래두었더니 껐다 켜도 포트 3000을 계속 들고있었던 것이었다. 서버 다 종료하고, 창도 다끄고 다시 시작했더니 잘열렸다. 사용할때만 켜놓고, 끄기를 잘 실천하자!

### 🗨️ 오늘의 회고

- 별거 아닌 오류에 사로잡혀 시간을 많이 소비할때가 있는데, 답답하면서도 해결하면 허탈해진다. 이럴때마다 항상 좋은경험헀다 생각하자!라고 생각하고 털어버리자.
