## 📆 2025-11-17

### 🔔 스크럼

- 컨테이너 관리 강의 복습 및 정리
- 이번주 과제 로컬에서 테스트 : 프론트엔드, 백엔드 모두 도커 이미지로 빌드하고, Reverse Proxy (Nginx), MySQL 또한 도커를 사용하여 프로젝트를 배포
  - 로컬테스트를 위한 환경구성
  - Dockerfile, dockerignore, docker-compose.yml, nginx.conf 작성
  - Nginx의 정확한 역할, 도커 어떻게 사용?
  - MySQL 연결 및 도커 어떻게 사용?
  - 배포하기 위한 코드 수정

### 🚀 Today I Learned

#### Portainer

- Docker, Kubernates같은 컨테이너 환경을 손쉽게 관리할 수 있도록 해주는 웹 기반 GUI 관리 도구
- 결국 자원을 먹음
- vs Docker desktop
  - Docker desktop : 로컬에 설치하는것. 주로 혼자 개발할때 사용하는 용도
  - Portainer : 서버환경에서 쓰는것. 하나의 서버가 아닌 여러대 서버나 클러스터를 한번에 관리할 수 있음
- 사용이유 : 우리 네트워크 내에 있는 인스턴스에서 돌아가고 있는 컨테이너를 관리할 수 있다.
- portainer 볼륨 : Portainer 컨테이너의 내부 데이터를 영구적으로 저장하기 위해 사용하는 Docekr볼륨
  - 컨테이너가 실행될땐
    - 이미지 레이어 ← Lower layer(읽기만 가능)
    - 컨테이너 레이어 ← Upper layer(읽기 쓰기가 둘다 가능함)
    - 컨테이너 삭제하면 데이터 날아감(Stateless) → 볼륨 사용
- 포테이너 실행 명령어
  - prtainer/portainer-ce → 어떤 이미지로 run할거야?
    - 이전까지는 다 option임
- 도커 버전 - 포테이너 버전 싱크 맞추기
  - 현재 도커 최신버전(29)을 포테이너가 아직 지원하지 않음
  1. 도커버전을 28.0.0 이거 사용한다
  2. 도커버전은 29버전 쓴다
     1. 그 대신 포테이너 버전을 2.20.2(옛날버전)을 사용한다 → prtainer/portainer-ce:2.20.2~
- 버전차이는 왜 발생할까?
  - 도커 = 컨테이너 관리 도구 ← 오픈소스
  - 쿠버네티스 = 컨테이너들의 오케스트레이션 ← 대규모 관리
    - 도커를 공식적으로는 지원하지 않음
    - containerd 지원함
  - 서로 버전 차이 나는 경우가 많음

#### Volume

- 컨테이너 간 데이터 공유 및 영속성을 제공하기 위해 호스트 파일 시스템에 생성되는 독립적인 저장소
- 컨테이너가 삭제되거나 재시작되어도 볼륨에 저장된 데이터는 유지되며, 동일 볼륨을 여러 컨테이너에 마운트하여 컨테이너 간 데이터 공유 가능
- 사용이유 : 컨테이너 종료 및 재시작에도 데이터를 영구적으로 유지하고 공유하기 위해
- 여러 컨테이너가 하나의 볼륨을 함께 사용하면 데이터를 쉽게 공유 가능

### 🔥 오늘의 도전 과제와 해결 방법

- 도커 배포 로컬 테스트시 트러블 슈팅
  - nginx 죽음, log도 안나옴
    - nginx.conf.yml이라고 확장자가 붙어있어서 그런거였음..
  - mysql 죽음
    - dockercompose.yml에서 db environment가 root가 아니라 user로 되어있어서 그랬던거라 user 계정 컬럼들 삭제
  - backend 죽음
    - mysql 죽은거 해결하니까 잘되긴하는데, 프론트엔드랑 통신이 안되는데 알고보니 통신은 되는데 에러메시지를 잘못 내뱉고 있는거여서 프론트 공통 fetch코드 수정해서 알맞은 응답을 내뱉도록함

### 🗨️ 오늘의 회고

- 로컬에서 테스트한건데도 삽질을 굉장히 많이 했다. 별거 아닌 오류를 몇시간동안 붙들고 있었다..그래도 서버에서 돌리기 위한 감은 잡은 것 같아서 다행이다.
